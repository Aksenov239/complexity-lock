\documentclass{standalone}
\usepackage{tikz} 

\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}

\renewcommand{\baselinestretch}{0.5}

\usepackage{amssymb,amscd,amsmath, cite,multirow,tikz,pgfplots,comment}

\usepgfplotslibrary{fillbetween}
\usetikzlibrary{matrix}
\usepgfplotslibrary{groupplots}
\pgfplotsset{compat=newest}

\begin{document}

\begin{tikzpicture}
   \begin{groupplot}[
       group style={
           group size= 6 by 5,
       },
       height=5cm,
       width=5cm,
   ]

   \nextgroupplot[title=Parallel work: 500,
                  ylabel={Processors: 5},
                  cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_5_500_simple.dat};\label{plot:simple}
       \addplot table {data/d10000/throughput/parallel_5_500_tts.dat};\label{plot:tts}
       \addplot table {data/d10000/throughput/parallel_5_500_ticket.dat};\label{plot:ticket}
       \coordinate (top) at (rel axis cs:0,1);% coordinate at top of the first plot

   \nextgroupplot[title=Parallel work: 1000, cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_5_1000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_5_1000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_5_1000_ticket.dat};

   \nextgroupplot[title=Parallel work: 5000, cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_5_5000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_5_5000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_5_5000_ticket.dat};

   \nextgroupplot[title=Parallel work: 10000, cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_5_10000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_5_10000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_5_10000_ticket.dat};

   \nextgroupplot[title=Parallel work: 50000, cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_5_50000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_5_50000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_5_50000_ticket.dat};

   \nextgroupplot[title=Parallel work: 100000, cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_5_100000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_5_100000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_5_100000_ticket.dat};



   \nextgroupplot[ylabel={Processors: 10},
                  cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_10_500_simple.dat};
       \addplot table {data/d10000/throughput/parallel_10_500_tts.dat};
       \addplot table {data/d10000/throughput/parallel_10_500_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_10_1000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_10_1000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_10_1000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_10_5000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_10_5000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_10_5000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_10_10000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_10_10000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_10_10000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_10_50000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_10_50000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_10_50000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_10_100000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_10_100000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_10_100000_ticket.dat};



   \nextgroupplot[ylabel={Processors: 20},
                  cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_20_500_simple.dat};
       \addplot table {data/d10000/throughput/parallel_20_500_tts.dat};
       \addplot table {data/d10000/throughput/parallel_20_500_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_20_1000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_20_1000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_20_1000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_20_5000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_20_5000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_20_5000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_20_10000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_20_10000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_20_10000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_20_50000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_20_50000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_20_50000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_20_100000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_20_100000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_20_100000_ticket.dat};



   \nextgroupplot[ylabel={Processors: 30},
                  cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_30_500_simple.dat};
       \addplot table {data/d10000/throughput/parallel_30_500_tts.dat};
       \addplot table {data/d10000/throughput/parallel_30_500_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_30_1000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_30_1000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_30_1000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_30_5000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_30_5000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_30_5000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_30_10000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_30_10000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_30_10000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_30_50000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_30_50000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_30_50000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_30_100000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_30_100000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_30_100000_ticket.dat};



   \nextgroupplot[ylabel={Processors: 39},
                  cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_39_500_simple.dat};
       \addplot table {data/d10000/throughput/parallel_39_500_tts.dat};
       \addplot table {data/d10000/throughput/parallel_39_500_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_39_1000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_39_1000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_39_1000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_39_5000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_39_5000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_39_5000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_39_10000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_39_10000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_39_10000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_39_50000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_39_50000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_39_50000_ticket.dat};

   \nextgroupplot[cycle list name=color]
       \addplot table {data/d10000/throughput/parallel_39_100000_simple.dat};
       \addplot table {data/d10000/throughput/parallel_39_100000_tts.dat};
       \addplot table {data/d10000/throughput/parallel_39_100000_ticket.dat};
       \coordinate (bot) at (rel axis cs:1,0);% coordinate at bottom of the last plot
  \end{groupplot}

  \path (top-|current bounding box.west)--
       node[anchor=south,rotate=90] {Throughput, mops/s}
       (bot-|current bounding box.west);

  %legend
  \path (top|-current bounding box.north)--
        coordinate(legendpos)
       (bot|-current bounding box.north);
  \matrix[
     matrix of nodes,
     anchor=south,
     draw,
     inner sep=0.2em,
  ] at ([yshift=1ex]legendpos) {
     \ref{plot:simple} & Simple \\
     \ref{plot:tts} & Test \& Test \& Set \\
     \ref{plot:ticket} & Ticket \\
  };

\end{tikzpicture}


\end{document}